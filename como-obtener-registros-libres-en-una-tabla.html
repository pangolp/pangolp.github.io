<!DOCTYPE html>
<html lang="es">
<head>
    <title>El blog de Pango | Stevej - Cómo obtener registros libres en una tabla</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Cómo obtener registros libres en una tabla" property="og:title">
    <meta content="Con este sencillo scripts, podrás encontrar registros libres, dentro de una tabla y poder utilizarlos si lo crees conveniente para tu proyecto." property="og:description">
    <meta property="og:tags" content="basededatos, sql, azerothcore">
    <meta content="https://pangolp.github.io" property="og:url">
    <meta content="https://pangolp.github.io/theme/img/logo.png" property="og:image">
    <meta content="#A72C2C" data-react-helmet="true" name="theme-color">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://pangolp.github.io/theme/css/code.min.css" />
    <link rel="stylesheet" type="text/css" href="./theme/css/style.css" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="https://pangolp.github.io/"><i class="fa-solid fa-spinner"></i> El blog de Pango | Stevej</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="https://pangolp.github.io/"><i class="fa-solid fa-house"></i> Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.azerothcore.org/" target="_blank"><i class="fa-solid fa-gamepad"></i> AzerothCore</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://wow-cms.com/" target="_blank"><i class="fa-solid fa-gamepad"></i> BlizzCMS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.trinitycore.org/" target="_blank"><i class="fa-solid fa-gamepad"></i> TrinityCore</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.chromiecraft.com/" target="_blank"><i class="fa-solid fa-gamepad"></i> ChromieCraft</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://linuxgsm.com/" target="_blank"><i class="fa-solid fa-gamepad"></i> LinuxGSM</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
<div class="container">
    <div class="row">
        <div class="col my-3">
            <h2><a href="https://pangolp.github.io/como-obtener-registros-libres-en-una-tabla.html" rel="bookmark" title="Permalink to Cómo obtener registros libres en una tabla">Cómo obtener registros libres en una tabla</a></h2>
            <div><i class="far fa-clock"></i> <strong>Publicado:</strong> Fri 04 June 2021 - <strong>Categoria:</strong> Base de datos</div>
            <div><i class="fas fa-tags"></i>  <a href="https://twitter.com/hashtag/basededatos" target="_blank">#basededatos</a> <a href="https://twitter.com/hashtag/sql" target="_blank">#sql</a> <a href="https://twitter.com/hashtag/azerothcore" target="_blank">#azerothcore</a></div>
            <div></div>
            <div class="my-3"><p>En algunas ocasiones, necesitamos obtener o conocer registros cuyos valores no están siendo ocupados.</p>
<p>Ya sea porque queremos insertar un nuevo valor, o porque queremos reestructurar nuestra tabla después de un tiempo.</p>
<p>Para esto, puede utilizar el siguiente script:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">t</span><span class="p">.</span><span class="n">id</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">FROM</span> <span class="n">Table1</span> <span class="n">t</span>
<span class="k">WHERE</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="o">*</span> 
    <span class="k">FROM</span> <span class="n">Table1</span> <span class="n">t2</span>
    <span class="k">WHERE</span> <span class="n">t2</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">id</span> <span class="o">+</span> <span class="mi">1</span>
<span class="p">)</span>
<span class="k">LIMIT</span> <span class="mi">1</span>
</code></pre></div>

<p>Debemos sustituir el nombre de la tabla, y los atributos que buscamos.</p>
<p>Ahora veamos un ejemplo. Supongamos que queremos buscar el primer registro libre dentro de <code>creature</code></p>
<p>Lo primero que tenemos que identificar es su clave primaria: <code>guid</code></p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="n">t</span><span class="p">.</span><span class="o">`</span><span class="n">guid</span><span class="o">`</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">FROM</span> <span class="o">`</span><span class="n">creature</span><span class="o">`</span> <span class="n">t</span>
<span class="k">WHERE</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="o">*</span> 
    <span class="k">FROM</span> <span class="o">`</span><span class="n">creature</span><span class="o">`</span> <span class="n">t2</span>
    <span class="k">WHERE</span> <span class="n">t2</span><span class="p">.</span><span class="o">`</span><span class="n">guid</span><span class="o">`</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="o">`</span><span class="n">guid</span><span class="o">`</span> <span class="o">+</span> <span class="mi">1</span>
<span class="p">)</span>
<span class="k">LIMIT</span> <span class="mi">1</span>
</code></pre></div>

<p>Al ejecutar la consulta, obtendremos como resultado en este caso, el número <strong>15</strong>.</p>
<p>Lo que debemos hacer ahora es comprobar que este valor no se está utilizando, mediante un <code>SELECT</code></p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">creature</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">guid</span><span class="o">`=</span><span class="mi">15</span><span class="p">;</span>
</code></pre></div>

<p>Para corroborar que la información es correcta, les dejo los primeros 16 registros.</p>
<table>
<thead>
<tr>
<th>guid</th>
<th>id</th>
<th>map</th>
<th>zoneId</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2843</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>7853</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>2499</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>2838</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>2839</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>2626</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>2482</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>8</td>
<td>8123</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>9459</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>9520</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>11</td>
<td>1215</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>12</td>
<td>1218</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>13</td>
<td>30140</td>
<td>571</td>
<td>0</td>
</tr>
<tr>
<td>14</td>
<td>30156</td>
<td>571</td>
<td>0</td>
</tr>
<tr>
<td>16</td>
<td>32442</td>
<td>571</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Como puede ver, el número 15 está disponible.</p>
<p><strong>Nota:</strong> la tabla tiene muchos más atributos, pero mostramos sólo algunos, para que la tabla no sea tan extensa.</p></div>
        </div>
    </div>
</div>
    <footer id="footer" class="bg-dark">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h3 class="text-center">Desarrollado con éxito por <a href="https://getpelican.com/" target="_blank">Pelican</a>, que se beneficia de las características de <a href="https://www.python.org/" target="_blank">Python</a>.</h3>
                    <h4 class="text-center">Tambien utilizamos <a href="https://getbootstrap.com/" target="_blank">Bootstrap</a> y mucho amor</h4>
                    <h5 class="text-center"><i class="fas fa-copyright"></i> 2022 - El blog de Pango | Stevej</h5>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script>
    $(document).ready(function () {
        $("table").attr("class", "table table-sm text-center");
        $("thead tr").addClass("bg-dark text-white");
        $("img").addClass("img-fluid mx-auto d-block");
    });
</script>
</body>
</html>