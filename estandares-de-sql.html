<!DOCTYPE html>
<html lang="es">
<head>
    <title>El blog de Pango | Stevej - Estándares de SQL</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="Estándares de SQL" property="og:title">
    <meta content="En este artículo, traducido de la wiki oficial de AzerothCore, trataremos de abarcar, temas relacionados a las buenas prácticas del lenguaje SQL. Con ejemplos sobre las tablas del emulador, pero que pueden ser modificadas, para utilizarlas en otras tablas." property="og:description">
    <meta property="og:tags" content="basededatos, azerothcore, sql, SQLStandards">
    <meta content="https://pangolp.github.io" property="og:url">
    <meta content="https://pangolp.github.io/theme/img/logo.png" property="og:image">
    <meta content="#A72C2C" data-react-helmet="true" name="theme-color">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://pangolp.github.io/theme/css/code.min.css" />
    <link rel="stylesheet" type="text/css" href="./theme/css/style.css" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="https://pangolp.github.io/"><i class="fa-solid fa-spinner"></i> El blog de Pango | Stevej</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="https://pangolp.github.io/"><i class="fa-solid fa-house"></i> Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.azerothcore.org/" target="_blank"><i class="fa-solid fa-gamepad"></i> AzerothCore</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://wow-cms.com/" target="_blank"><i class="fa-solid fa-gamepad"></i> BlizzCMS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.trinitycore.org/" target="_blank"><i class="fa-solid fa-gamepad"></i> TrinityCore</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://www.chromiecraft.com/" target="_blank"><i class="fa-solid fa-gamepad"></i> ChromieCraft</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://linuxgsm.com/" target="_blank"><i class="fa-solid fa-gamepad"></i> LinuxGSM</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
<div class="container">
    <div class="row">
        <div class="col my-3">
            <h2><a href="https://pangolp.github.io/estandares-de-sql.html" rel="bookmark" title="Permalink to Estándares de SQL">Estándares de SQL</a></h2>
            <div><i class="far fa-clock"></i> <strong>Publicado:</strong> Mon 07 June 2021 - <strong>Categoria:</strong> base de datos</div>
            <div><i class="fas fa-tags"></i>  <a href="https://twitter.com/hashtag/basededatos" target="_blank">#basededatos</a> <a href="https://twitter.com/hashtag/azerothcore" target="_blank">#azerothcore</a> <a href="https://twitter.com/hashtag/sql" target="_blank">#sql</a> <a href="https://twitter.com/hashtag/SQLStandards" target="_blank">#SQLStandards</a></div>
            <div></div>
            <div class="my-3"><p><a href="https://www.azerothcore.org/wiki/sql-standards">Documentación oficial de la wiki de AzerothCore</a></p>
<h2>Consultas</h2>
<h3>Normas generales</h3>
<p>Para los ejemplos, utilizamos la tabla <code>creature_loot_template</code></p>
<p>Siempre utilizamos <strong>comillas simples ('')</strong> alrededor de los valores de las cadenas, pero NUNCA alrededor de un número entero.</p>
<h3>INSERTAR Y ELIMINAR</h3>
<p>Siempre se hace un DELETE antes de un INSERT para asegurar que siempre se pongan los campos en la consulta y que no se produzcan errores.</p>
<p>No es correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">creature_loot_template</span><span class="o">`</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">884</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Comment&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">creature_loot_template</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`=</span><span class="mi">3</span> <span class="k">AND</span> <span class="o">`</span><span class="n">item</span><span class="o">`=</span><span class="mi">884</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">creature_loot_template</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">Entry</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">Item</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">Reference</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">Chance</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">QuestRequired</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">LootMode</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">GroupId</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">MinCount</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">MaxCount</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="k">Comment</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> 
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">884</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Comment&#39;</span><span class="p">);</span>
</code></pre></div>

<h3>ACTUALIZACIÓN</h3>
<p>Asegúrese de que sus consultas son precisas para evitar cambiar algo que no desea editar.</p>
<p><strong>Regla de oro</strong>: incluya siempre todas las claves primarias en su cláusula <code>WHERE</code>.</p>
<p>No es correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_loot_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">Chance</span><span class="o">`=</span><span class="mi">100</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">item</span><span class="o">`=</span><span class="mi">884</span><span class="p">;</span>
</code></pre></div>

<p>Correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_loot_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">Chance</span><span class="o">`=</span><span class="mi">100</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`=</span><span class="mi">3</span> <span class="k">AND</span> <span class="o">`</span><span class="n">item</span><span class="o">`=</span><span class="mi">884</span><span class="p">;</span>
</code></pre></div>

<h3>Variables</h3>
<p>Las variables pueden ser buenas cuando se cambia la misma entrada en varios lugares para evitar errores.</p>
<p>Antes:</p>
<div class="highlight"><pre><span></span><code><span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">AIName</span><span class="o">`=</span><span class="s1">&#39;SmartAI&#39;</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`=</span><span class="mi">7727</span><span class="p">;</span>

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">smart_scripts</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entryorguid</span><span class="o">`=</span><span class="mi">7727</span> <span class="k">AND</span> <span class="o">`</span><span class="n">source_type</span><span class="o">`=</span><span class="mi">0</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">smart_scripts</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">entryorguid</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">source_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">link</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_phase_mask</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_chance</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_flags</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param1</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param2</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param3</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param4</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param5</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param1</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param2</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param3</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param4</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param5</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param6</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param1</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param2</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param3</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param4</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_x</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_y</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_z</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_o</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="k">comment</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> 
<span class="p">(</span><span class="mi">7727</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">930</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Grimtotem Shaman - In Combat - Cast \&#39;</span><span class="k">Chain</span> <span class="n">Lightning</span><span class="err">\</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">7727</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">8499</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Grimtotem Shaman - Between 0-50% Health - Cast \&#39;</span><span class="n">Fire</span> <span class="n">Nova</span><span class="err">\</span><span class="s1">&#39; (No Repeat)&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">7727</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">8005</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Grimtotem Shaman - Between 0-30% Health - Cast \&#39;</span><span class="n">Healing</span> <span class="n">Wave</span><span class="err">\</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</code></pre></div>

<p>Después:</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- Grimtotem Shaman SAI</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">ENTRY</span> <span class="p">:</span><span class="o">=</span> <span class="mi">7727</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">SPELL1</span> <span class="p">:</span><span class="o">=</span> <span class="mi">930</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">SPELL2</span> <span class="p">:</span><span class="o">=</span> <span class="mi">8499</span><span class="p">;</span>
<span class="k">SET</span> <span class="o">@</span><span class="n">SPELL3</span> <span class="p">:</span><span class="o">=</span> <span class="mi">8005</span><span class="p">;</span>

<span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">AIName</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;SmartAI&#39;</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="o">@</span><span class="n">ENTRY</span><span class="p">;</span>

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">smart_scripts</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entryorguid</span><span class="o">`</span> <span class="o">=</span> <span class="o">@</span><span class="n">ENTRY</span> <span class="k">AND</span> <span class="o">`</span><span class="n">source_type</span><span class="o">`</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">smart_scripts</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">entryorguid</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">source_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">link</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_phase_mask</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_chance</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_flags</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param1</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param2</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param3</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param4</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">event_param5</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param1</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param2</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param3</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param4</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param5</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">action_param6</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_type</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param1</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param2</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param3</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_param4</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_x</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_y</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_z</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">target_o</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="k">comment</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> 
<span class="p">(</span><span class="o">@</span><span class="n">ENTRY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">@</span><span class="n">SPELL1</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Grimtotem Shaman - In Combat - Cast \&#39;</span><span class="k">Chain</span> <span class="n">Lightning</span><span class="err">\</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="o">@</span><span class="n">ENTRY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">@</span><span class="n">SPELL2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Grimtotem Shaman - Between 0-50% Health - Cast \&#39;</span><span class="n">Fire</span> <span class="n">Nova</span><span class="err">\</span><span class="s1">&#39; (No Repeat)&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="o">@</span><span class="n">ENTRY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">@</span><span class="n">SPELL3</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Grimtotem Shaman - Between 0-30% Health - Cast \&#39;</span><span class="n">Healing</span> <span class="n">Wave</span><span class="err">\</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</code></pre></div>

<h3>Consultas cortas</h3>
<p>Siempre mantenemos el código lo más corto posible para limitar el tamaño de los archivos y disminuir el número de consultas necesarias para su ejecución.</p>
<p>No es correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="p">...);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="p">...);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="p">...);</span>

<span class="k">UPDATE</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">field_1</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;someValue&#39;</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">field_1</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;someValue&#39;</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">field_1</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;someValue&#39;</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>
</code></pre></div>

<p>Correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="k">IN</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">VALUES</span>
<span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="p">...),</span>
<span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="p">...),</span>
<span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="p">...);</span>

<span class="k">UPDATE</span> <span class="o">`</span><span class="n">table_1</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">field_1</span><span class="o">`</span> <span class="o">=</span> <span class="s1">&#39;someValue&#39;</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="k">IN</span> <span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
</code></pre></div>

<h3>Banderas y Bits</h3>
<p>Para los campos de la base de datos en los que trabajamos con banderas siempre es preferible que añadamos o eliminemos banderas en lugar de sobrescribirlas.</p>
<p>No es correcto:</p>
<div class="highlight"><pre><span></span><code><span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">mechanic_immune_mask</span><span class="o">`</span> <span class="o">=</span> <span class="mi">617299803</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">7727</span><span class="p">;</span>
</code></pre></div>

<p>Correcto:</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- Añadir banderas</span>
<span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">mechanic_immune_mask</span><span class="o">`=`</span><span class="n">mechanic_immune_mask</span><span class="o">`|</span><span class="mi">64</span><span class="o">|</span><span class="mi">256</span><span class="o">|</span><span class="mi">1024</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">7727</span><span class="p">;</span>

<span class="c1">-- Eliminación de banderas</span>
<span class="k">UPDATE</span> <span class="o">`</span><span class="n">creature_template</span><span class="o">`</span> <span class="k">SET</span> <span class="o">`</span><span class="n">mechanic_immune_mask</span><span class="o">`=`</span><span class="n">mechanic_immune_mask</span><span class="o">`&amp;~</span><span class="p">(</span><span class="mi">64</span><span class="o">|</span><span class="mi">256</span><span class="o">|</span><span class="mi">1024</span><span class="p">)</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">entry</span><span class="o">`</span> <span class="o">=</span> <span class="mi">7727</span><span class="p">;</span>
</code></pre></div>

<h2>Tablas y columnas</h2>
<h3>Números enteros</h3>
<p>No definimos el ancho de un entero cuando creamos nuevas columnas. (El ancho está obsoleto en versiones posteriores de MySQL 8)</p>
<div class="highlight"><pre><span></span><code><span class="n">TINYINT</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>   <span class="o">-&gt;</span> <span class="n">TINYINT</span>
<span class="nb">SMALLINT</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>  <span class="o">-&gt;</span> <span class="nb">SMALLINT</span>
<span class="nb">INT</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>       <span class="o">-&gt;</span> <span class="nb">INT</span>
<span class="n">MEDIUMINT</span><span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MEDIUMINT</span>
<span class="nb">BIGINT</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>    <span class="o">-&gt;</span> <span class="nb">BIGINT</span>

<span class="n">BOOL</span>         <span class="o">-&gt;</span> <span class="n">Nunca</span> <span class="n">se</span> <span class="n">utiliza</span><span class="p">,</span> <span class="n">sinónimo</span> <span class="n">de</span> <span class="n">TINYINT</span><span class="p">.</span> <span class="mi">0</span> <span class="o">=</span> <span class="k">false</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span> <span class="o">=</span> <span class="k">true</span>
</code></pre></div>

<h3>Flotante, Doble, Decimal</h3>
<p>Estos tipos de datos no pueden ser UNSIGNED y por lo tanto utilizamos CHECK CONSTRAINTS en su lugar. (UNSIGNED Float, Double, Decimal está obsoleto en versiones posteriores de MySQL 8)</p>
<div class="highlight"><pre><span></span><code><span class="kt">FLOAT</span> <span class="k">UNSIGNED</span> <span class="o">-&gt;</span> <span class="k">CHECK</span> <span class="p">(</span><span class="n n-Quoted">`column`</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<h3>Codificación de caracteres</h3>
<p>Usamos UTF8MB4 donde antes se usaba UTF8 o UTF8MB3. (utf8 es un alias y utf8mb3 está obsoleto en versiones posteriores de MySQL 8)</p>
<div class="highlight"><pre><span></span><code><span class="n">utf8</span>    <span class="o">-&gt;</span> <span class="n">utf8mb4</span>
<span class="n">utf8mb3</span> <span class="o">-&gt;</span> <span class="n">utf8mb4</span>

<span class="n">Esto</span> <span class="n">también</span> <span class="n">se</span> <span class="n">aplica</span> <span class="n">a</span> <span class="o">`</span><span class="n">utf8_unicode_ci</span><span class="o">`</span><span class="p">,</span> <span class="n">etc</span><span class="p">.</span>
</code></pre></div>

<h3>Comprobar restricciones</h3>
<p>Puede ver <a href="https://github.com/Azerothcore/azerothcore-wotlk/blob/master/data/sql/base/db_auth/realmlist.sql">aquí</a> cómo se realizan los controles.</p>
<p>Todas las restricciones de verificación activas se pueden encontrar utilizando esta consulta:</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">information_schema</span><span class="o">`</span><span class="p">.</span><span class="n">CHECK_CONSTRAINTS</span><span class="p">;</span>
</code></pre></div>

<h2>Nota para el encargado de revisar el SQL</h2>
<p>Cuando trabajemos con GUID's, asegurémonos de utilizar el menor número de entradas posible para rellenar los huecos en la base de datos. Esto puede hacerse fácilmente con herramientas como <a href="https://github.com/azerothcore/unused-guid-search">Unused GUID Searcher</a>.
También puedes leer este otro documento: <a href="https://pangolp.github.io/como-obtener-registros-libres-en-una-tabla.html">Cómo obtener registros libres en una tabla</a></p></div>
        </div>
    </div>
</div>
    <footer id="footer" class="bg-dark">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h3 class="text-center">Desarrollado con éxito por <a href="https://getpelican.com/" target="_blank">Pelican</a>, que se beneficia de las características de <a href="https://www.python.org/" target="_blank">Python</a>.</h3>
                    <h4 class="text-center">Tambien utilizamos <a href="https://getbootstrap.com/" target="_blank">Bootstrap</a> y mucho amor</h4>
                    <h5 class="text-center"><i class="fas fa-copyright"></i> 2022 - El blog de Pango | Stevej</h5>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script>
    $(document).ready(function () {
        $("table").attr("class", "table table-sm text-center");
        $("thead tr").addClass("bg-dark text-white");
        $("img").addClass("img-fluid mx-auto d-block");
    });
</script>
</body>
</html>